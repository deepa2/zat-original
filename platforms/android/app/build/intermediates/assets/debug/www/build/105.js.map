{"version":3,"sources":["../../src/container/feedback/feedback.module.ts","../../src/container/feedback/feedback.ts"],"names":[],"mappings":"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","file":"105.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { FeedbackPage } from './feedback';\n\nimport { ComponentsModule } from '../../components/components.module'\n\n@NgModule({\n  declarations: [\n    FeedbackPage\n  ],\n  imports: [\n    ComponentsModule,\n    IonicPageModule.forChild(FeedbackPage),\n  ]\n})\nexport class FeedbackPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/container/feedback/feedback.module.ts","import { Component, OnInit } from '@angular/core';\nimport { ViewController, IonicPage, NavParams, NavController, AlertController } from 'ionic-angular';\nimport { Store } from \"@ngrx/store\";\nimport * as fromStore from '../../store';\nimport { Observable } from \"rxjs\";\nimport { Data } from '../../providers/data/data';\nimport { Subscription } from 'rxjs/Subscription';\n\n@IonicPage()\n@Component({\n    selector: 'page-feedback',\n    templateUrl: 'feedback.html'\n})\nexport class FeedbackPage implements OnInit {\n\n    feedbackTitle: any;\n    feedbackQuery: any;\n    //queryList: any;\n    addComment: string;\n    rating: number;\n    questionId: number;\n    url: string = 'submitUserRate';\n    loading$: Observable<any>;\n    feedbackResponse$: Observable<any>;\n    isenabled: boolean = true;\n    ratingsData: any;\n    userRateArray: Array<any> = [];\n\n    private _addFeedbackDataListener: Subscription = new Subscription();\n\n    ngOnInit() {\n        this.feedbackTitle = 'How was your experience with us?';\n        this.feedbackQuery = 'What went well?';\n        this.rating = 5;\n    }\n\n    ionViewWillEnter() {\n\n        this.getRatingData().then((success) => {\n            this.onRatingChange(this.rating);\n        });\n\n        this.loading$ = this.store.select<any>(fromStore.getAddFeedbackLoading);\n\n        this._addFeedbackDataListener = this.store.select<any>(fromStore.getAddFeedbackData).subscribe((response) => {\n            if (response) {\n                if (response.status.statusCode == 1) {\n                    this.presentAlert();\n                }\n\n            }\n        });\n\n    }\n\n    constructor(private viewCtrl: ViewController, params: NavParams,\n        private store: Store<fromStore.AppState>, private data: Data,\n        private alertCtrl: AlertController,\n        private navCtrl: NavController) {\n        this.questionId = params.get('queryId');\n        this.addComment = '';\n\n        // if (this.addComment !== '') {\n        //     this.isenabled = true;\n        // } else {\n        //     this.isenabled = false;\n        // }\n    }\n\n    submitFeedback() {\n        let userRate = [];\n        this.userRateArray.map((item) => {\n            if (item.checked) {\n                userRate.push({ 'key': item.key, 'value': item.value })\n            }\n        })\n\n        let parameters = {\n            'questionId': this.questionId,\n            'userComment': this.addComment,\n            \"rate\": this.rating,\n            'userRate': userRate\n        };\n\n        this.store.dispatch(new fromStore.AddFeedbackAction(this.url, parameters));\n\n    }\n\n    dismiss(status) {\n        this.viewCtrl.dismiss(status);\n    }\n\n    getRatingData() {\n        return new Promise((resolve) => {\n            this.data.getData('miscData').then((res:any) => {\n                this.ratingsData = res.ratings;\n                resolve();\n            })\n        })\n\n    }\n\n    onRatingChange(value: number) {\n        this.rating = value;\n        if (this.rating < 4) {\n            this.feedbackQuery = 'What went wrong?';\n        } else if (this.rating > 3) {\n            this.feedbackQuery = 'What went well?';\n        }\n        switch (value) {\n            case 1:\n                this.userRateArray = this.ratingsData.userRateOne;\n                break;\n            case 2:\n                this.userRateArray = this.ratingsData.userRateTwo;\n                break;\n            case 3:\n                this.userRateArray = this.ratingsData.userRateThree;\n                break;\n            case 4:\n                this.userRateArray = this.ratingsData.userRateFour;\n                break;\n            case 5:\n                this.userRateArray = this.ratingsData.userRateFive;\n                break;\n            default:\n                this.userRateArray = [];\n                break;\n        }\n\n        this.userRateArray.map((item: any) => {\n            item.checked = false;\n        });\n\n        this.isenabled = true;\n\n    }\n\n    presentAlert() {\n\n        let alert = this.alertCtrl.create({\n            enableBackdropDismiss: false,\n            // title: 'Confirmation',\n            subTitle: 'Submitted Successfully',\n            buttons: [\n                {\n                    text: 'OK',\n                    handler: () => {\n                        this.store.dispatch(new fromStore.ResetFeedbackAction());\n                        this.addComment = '';\n                        this.dismiss(true);\n                    }\n                }\n            ]\n        });\n        alert.present();\n\n    }\n\n    CheckBoxChanged(i, e) {\n\n        let checkedItems = this.userRateArray.filter((item) => {\n            return item.checked == true;\n        })\n\n        if (checkedItems.length > 0)\n            this.isenabled = false;\n        else\n            this.isenabled = true;  \n    }\n\n    ionViewWillLeave() {\n        this._addFeedbackDataListener.unsubscribe();\n    }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/container/feedback/feedback.ts"],"sourceRoot":""}