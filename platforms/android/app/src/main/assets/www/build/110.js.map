{"version":3,"sources":["../../src/container/detail/detail.module.ts","../../src/container/detail/detail.ts"],"names":[],"mappings":"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","file":"110.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { CommonModule } from '@angular/common';\nimport { FormsModule } from '@angular/forms';\n\nimport { IonicPageModule } from 'ionic-angular';\n\nimport { DetailPage } from './detail';\n\n\nimport { ComponentsModule } from '../../components/components.module'\n\n\n@NgModule({\n  imports: [\n    CommonModule,\n    FormsModule,\n    ComponentsModule,\n    IonicPageModule.forChild(DetailPage),\n  ],\n  declarations: [DetailPage]\n})\nexport class DetailPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/container/detail/detail.module.ts","import { Component, OnInit } from '@angular/core';\nimport { LoadingController } from 'ionic-angular';\nimport { IonicPage, NavParams, ModalController, NavController, ViewController, PopoverController } from 'ionic-angular';\nimport { Store } from \"@ngrx/store\";\nimport * as fromStore from '../../store';\nimport { Observable } from 'rxjs';\nimport { Subscription } from 'rxjs/Subscription';\nimport { Data } from '../../providers/data/data';\n\n@IonicPage()\n@Component({\n  selector: 'page-detail',\n  templateUrl: 'detail.html'\n})\nexport class DetailPage\n{\n\n\n  items: any = {};\n  answers$: any = [];\n  loading$: Observable<any>;\n  questionId: number;\n  currentDate: any = new Date();\n  timeline: boolean = false;\n  showOptions: boolean = true;\n  showQueryListOptions: boolean = true;\n  showQueryOption: boolean = true;\n  pageName: string = 'list';\n  showFooter: boolean = false;\n  role: any;\n  notificationCount: number;\n  userType: any\n\n  private _itemListener: Subscription = new Subscription();\n  private _itemDetailsListener: Subscription = new Subscription();\n  private _roleListener: Subscription = new Subscription();\n  private _notificationListener: Subscription = new Subscription();\n\n  constructor(\n    private navParams: NavParams,\n    private navCtrl: NavController,\n    private store: Store<fromStore.AppState>,\n    private modalCtrl: ModalController,\n    private popoverCtrl: PopoverController,\n    private dataService: Data,\n    private viewCtrl: ViewController)\n  {\n    this.dataService.getData('loginDetails').then((loginData: any) =>\n    {\n      if (loginData.details)\n      {\n        this.userType = loginData.details.userDetails.userType;\n      }\n    })\n  }\n\n  ngOnInit()\n  {\n    this.answers$ = [];\n    this.questionId = this.navParams.get('id');\n  }\n\n  ionViewWillEnter()\n  {\n    this.getNotificationCount();\n  }\n\n  toggle()\n  {\n    this.timeline = !this.timeline;\n  }\n\n  getItem()\n  {\n\n    this._itemListener = this.store.select<any>(fromStore.getQuestionState).subscribe(response =>\n    {\n\n      if (response)\n      {\n\n        if (response && response.pending == false)\n        {\n\n          this.items = response.data.filter((item) =>\n          {\n            return item.questionId == this.questionId\n          })[0];\n        }\n      }\n\n    }, err =>\n    {\n    });\n\n  }\n\n  getItemDetail()\n  {\n\n    let currentURL = \"getQuestionTrail\";\n\n    let params = {\n      'questionId': this.questionId,\n      'role': this.role\n    };\n\n    this.store.dispatch(new fromStore.GetQueryDetailAction(currentURL, params));\n\n    this._itemDetailsListener = this.store.select<any>(fromStore.getQueryDetailData).subscribe(response =>\n    {\n\n      if (response)\n      {\n        this.answers$ = response.responseList;\n        this.items = response.questionDetails;\n      }\n    });\n\n    this.loading$ = this.store.select<any>(fromStore.getQueryDetailLoading);\n    setTimeout(() =>\n    {\n      console.log('Scroll Content')\n      var footerHeight = document.getElementById('detail-footer').offsetHeight;\n      console.log('footerHeight::', footerHeight)\n      var contentPadding = document.querySelector('#scroll-custom-height .scroll-content');\n      if (footerHeight)\n      {\n        contentPadding.setAttribute('style', `padding:${footerHeight}px 0px !important`)\n      }\n    }, 500);\n\n  }\n\n  presentFeedback()\n  {\n    let feedbackModal = this.modalCtrl.create('FeedbackPage', { queryId: this.questionId });\n    feedbackModal.onDidDismiss((status) =>\n    {\n      if (status)\n      {\n        console.log(status);\n        let currentIndex = this.navCtrl.getActive().index - 1;\n        this.navCtrl.remove(currentIndex, 2);\n      }\n\n    });\n\n    feedbackModal.present().then(() =>\n    {\n    });\n  }\n\n  ionViewDidLoad()\n  {\n\n    this._roleListener = this.store.select<any>(fromStore.getRole).subscribe((role) =>\n    {\n\n\n      this.role = role;\n\n      this.showFooter = true;\n\n      if (role == 'admin' || role == 'hr')\n      {\n        this.showOptions = false;\n      } else\n      {\n        this.showOptions = true;\n      }\n    });\n\n    this.getItemDetail();\n    this.getNotificationCount();\n  }\n\n  getNotificationCount()\n  {\n    this._notificationListener = this.store.select<any>(fromStore.getNotificationCount).subscribe((res) =>\n    {\n      this.notificationCount = res;\n    });\n  }\n\n  goToPage(page)\n  {\n    if (page == 'SearchPage')\n    {\n      this.navCtrl.push(page, { 'searchType': 'query' });\n    } else if (page == 'NotificationPage')\n    {\n      this.navCtrl.push(page, { 'notificationType': 'QUESTION' });\n    } else\n    {\n      this.navCtrl.push(page);\n    }\n\n  }\n\n  presentOptions(myEvent)\n  {\n\n    let popover = this\n      .popoverCtrl\n      .create('PopoverPage', { 'type': 'others', userType: this.userType });\n\n    popover.present({ ev: myEvent });\n\n    popover.onDidDismiss((type) =>\n    {\n\n      if (type)\n      {\n        this.dataService.saveData('role', type);\n        this.store.dispatch(new fromStore.SetRole(type));\n      }\n\n    })\n\n  }\n\n  tag(type)\n  {\n    this.navCtrl.push('TagPage', {\n      'queryId': this.questionId,\n      'groupId': this.items.groupId\n    })\n  }\n\n  ionViewWillLeave()\n  {\n    this._itemDetailsListener.unsubscribe();\n    this._roleListener.unsubscribe();\n    this._itemListener.unsubscribe();\n    this._notificationListener.unsubscribe();\n  }\n\n\n  addAnswer(answerType)\n  {\n    this.navCtrl.push('AddPage', { 'type': 'addAnswer', 'questionId': this.questionId, 'answerType': answerType })\n      .then(() =>\n      {\n        // first we find the index of the current view controller:\n        //const index = this.viewCtrl.index;\n        // then we remove it from the navigation stack\n        //this.navCtrl.remove(index);\n      });;\n  }\n\n  goToHome()\n  {\n    this.navCtrl.push('HomePage', {\n\n    });\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/container/detail/detail.ts"],"sourceRoot":""}