{"version":3,"sources":["../../src/container/zents/overtime/apply-additional-hours/apply-additional-hours.module.ts","../../src/container/zents/overtime/apply-additional-hours/apply-additional-hours.ts"],"names":[],"mappings":"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","file":"29.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { ApplyAdditionalHoursPage } from './apply-additional-hours';\n\n@NgModule({\n  declarations: [\n    ApplyAdditionalHoursPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(ApplyAdditionalHoursPage),\n  ],\n  exports:[ApplyAdditionalHoursPage]\n})\nexport class ApplyAdditionalHoursPageModule {}\n\n\n\n// WEBPACK FOOTER //\n// ./src/container/zents/overtime/apply-additional-hours/apply-additional-hours.module.ts","import { Component, OnInit } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController } from 'ionic-angular';\nimport { FormGroup, FormBuilder, Validators } from '@angular/forms';\nimport { CommonUtilities } from '../../../../providers/commonUtilities/commonUtilities';\nimport { HttpProvider } from '../../../../providers/http/http';\nimport { StdTaskListModalComponent } from '../../../../components/std-task-list-modal/std-task-list-modal';\n/**\n * Generated class for the ApplyAdditionalHoursPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-apply-additional-hours',\n  templateUrl: 'apply-additional-hours.html',\n})\nexport class ApplyAdditionalHoursPage implements OnInit {\n  private projectForm: FormGroup;\n  private projectList: Array<any> = [];\n  private taskList: Array<any> = [];\n  private compareFlag: boolean = false;\n  private showTimeError: boolean = false;\n  private resolve: Function;\n  private dates: any;\n  private projRelatedStdTasks: Array<any> = [];\n  private orgRelatedStdTasks: Array<any> = [];\n  private flags = {\n    isSubmitted: false,\n    showForm: false\n  }\n  private data = {\n    pageTitle: null\n  }\n\n\n  constructor(private navCtrl: NavController, private navParams: NavParams, private fb: FormBuilder,\n    private utility: CommonUtilities, private httpProvider: HttpProvider, private modalCtrl: ModalController) {\n  }\n\n  ionViewDidLoad() {\n\n  }\n\n  ngOnInit() {\n    this.projectForm = this.fb.group({\n      ProjName: [\"\", Validators.required],\n      startDate: [\"\", Validators.required],\n      endDate: [\"\", Validators.required],\n      time: [\"00:00\", Validators.required],\n      ServiceName: [{ value: '', disabled: true }, Validators.required],\n      TaskName: [{ value: '' }],\n      tname: [{ value: '', disabled: true }, Validators.required],\n      Remarks: '',\n      taskID: [\"\"]\n    });\n    this.getOTProjectList();\n\n    this.dates = this.navParams.get('calendarDates');\n    this.resolve = this.dates.resolve;\n    this.data.pageTitle = this.dates.pageTitle;\n\n  }\n\n  /**\n   * Get Project List\n   */\n  getOTProjectList() {\n    const url = 'overtimeproject';\n    this.utility.updateLoader(true);\n    this.httpProvider.http.zentsCommonGETService({ url, overtime: true }).subscribe((res: any) => {\n\n      this.utility.updateLoader(false);\n      if (res && res.data) {\n        this.flags.showForm = true;\n        let data = res.data;\n        if (data.projects) {\n          this.projectList = data.projects;\n          this.projectList.map((projectData) => {\n            this.taskList = [...this.taskList, ...projectData.overtimetasks];\n          })\n        }\n        this.taskList = [...this.taskList, ...data.standardtaks];\n\n        this.taskList.map(task => {\n          if (task.serviceId == '201') {\n            this.projRelatedStdTasks.push(task);\n          } else if (task.serviceId == '202') {\n            this.orgRelatedStdTasks.push(task);\n          }\n        })\n        this.updateFormData();\n      }\n    })\n  }\n\n  /**\n   * default select project if the associate is allocated to single project\n   */\n  updateFormData() {\n    if (this.projectList && this.projectList.length == 1) {\n      this.projectForm.patchValue({\n        \"ProjName\": this.projectList[0]\n      });\n      this.projectForm.get('tname').enable();\n    }\n  }\n\n  onProjectSelect(event) {\n    this.projectForm.get('tname').enable();\n  }\n\n  onEndDateSelect(e) {\n    this.compareFlag = new Date(this.projectForm.get('endDate').value) < new Date(this.projectForm.get('startDate').value);\n  }\n\n  onStartDateSelect(e) {\n    this.compareFlag = new Date(this.projectForm.get('startDate').value) > new Date(this.projectForm.get('endDate').value);\n  }\n\n  onTimeChange(e) {\n    this.showTimeError = this.projectForm.get('time').value == '00:00' ? true : false;\n  }\n\n  //Confirm save \n  addTaskConfirmAlert() {\n    this.flags.isSubmitted = true;\n    this.showTimeError = this.projectForm.get('time').value == '00:00' ? true : false;\n    if (this.projectForm.valid && !this.compareFlag && !this.showTimeError) {\n      let alert = this.utility.presentConfirmation('Are you sure you want to apply additional hours for the task ?');\n      alert.then(() => {\n        this.addTask();\n      })\n    }\n  }\n\n  /**\n   * Method to apply OT\n   */\n  addTask() {\n    this.utility.updateLoader(true);\n    let formValue = this.projectForm.value;\n    let data = {\n      \"projectId\": formValue.ProjName.projectId,\n      \"estStartDate\": formValue.startDate,\n      \"estEndDate\": formValue.endDate,\n      \"workhr\": parseFloat(this.transformTime(formValue.time)),\n      \"comments\": formValue.Remarks,\n      \"serviceId\": formValue.TaskName.serviceId,\n      \"taskId\": formValue.TaskName.taskId,\n      \"taskName\": formValue.TaskName.taskName,\n      \"projectName\": formValue.ProjName.projectName\n    }\n    if (this.projectForm.valid) {\n      let url: String = \"overtime\";\n      this.httpProvider.http.zentsCommonService({ url, data, overtime: true }).subscribe((res: any) => {\n        if (res && res.userMessage) {\n          this.navCtrl.pop().then(() => this.resolve(res.userMessage));\n        }\n      }, (err) => {\n        this.utility.updateLoader(false);\n      })\n    } else {\n      return false;\n    }\n\n  }\n\n  transformTime(value: string): string {\n    return value.replace(\":\", '.');\n  }\n\n  //open task list modal\n  async openTaskListModal() {\n    if (this.projectForm.get('ProjName').value) {\n      let listModal = this.modalCtrl.create(StdTaskListModalComponent, {\n        projRelatedStdTasks: this.projRelatedStdTasks,\n        orgRelatedStdTasks: this.orgRelatedStdTasks\n      });\n      listModal.present();\n      listModal.onDidDismiss((res: any) => {\n        if (res) {\n          this.projectForm.get('TaskName').setValue(res);\n          this.projectForm.get('tname').setValue(res.taskName);\n        }\n      });\n    }\n  }\n\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/container/zents/overtime/apply-additional-hours/apply-additional-hours.ts"],"sourceRoot":""}