<!--
  Generated template for the ZenLearnDashboardPage page.

  See http://ionicframework.com/docs/components/#navigation for more info on
  Ionic pages and navigation.
-->
<ion-header>
    <ion-navbar>
        <ion-title>ZenLearn Dashboard</ion-title>
    </ion-navbar>
</ion-header>

<ion-content>
    <div *ngIf="zenLearnData">
        <div class="dashboard-title">
            <div class="dash-img-parent">
                <img class="dash-img" src="assets/zenLearn-imgs/dashboard-interface.svg" onerror="this.src='./assets/imgs/logo.png'" />

            </div>
            <div class="dash-title">Dashboard</div>
        </div>

        <!-- Dashboard slider-->

        <ion-slides class="height-auto" [slidesPerView]="slidePerView">
            <!-- learning-card -->
            <ion-slide>
                <ion-card class="progresscard-border height200">
                    <div>
                        <div class="profile-picture bgLearningHrsBgCard">
                            <span class="padding2per">
                <img class="profileImg" src="assets/zenLearn-imgs/DAP-icon.svg"
                  onerror="this.src='./assets/imgs/logo.png'" />
              </span>

                            <div style="
    display: flex;
    flex-direction: column;
    align-items: flex-start;
">
                                <span class="profile-heading colorWhite">{{learningHistory?.title ? learningHistory?.title : "Learning Summary"}}</span>
                                <div class="finance-year-container" (click)="openFinancialYears()">
                                    <p class="financial-year-selector">{{selYear ? "FY " + selYear : 'Select year'}}</p>
                                    <img src="assets/zenAdmin/down-arrow.svg" class="drop-down-img">
                                </div>
                            </div>
                        </div>
                        <div class="container-card">
                            <div class="learning-card" *ngFor="let item of learningHistory?.learningList" (click)="allOffering(item.type)">
                                <div class="learning-icon"> <span><img class="icon-header" [src]=item?.icon
                      onerror="this.src='./assets/imgs/logo.png'" /></span></div>
                                <div class="flex-column-center width88per padding0-5">
                                    <div class=" width100per">
                                        <span class="justify-content-space-btw width100per">
                      <span class="center font-1p2 learn-sum-title">{{item.title}}</span>
                                        <span class="center">
                        <span class="lerning-pecent-value font-bold">{{item.percentage}}%</span>
                                        <span class="lerning-hr">{{item.totalCreditHrs}} Hrs</span>
                                        <ion-icon class="padding-left12" end name="ios-arrow-forward"></ion-icon>
                                        </span>
                                        </span>
                                    </div>
                                    <div class="progress-outer">
                                        <div class="progress-inner" [ngStyle]="{'background-color':'#01C275','width':item.percentage +'%'}">
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <div *ngIf="!learningHistory" class="nodata">No Data Available</div>

                        </div>
                    </div>
                </ion-card>
            </ion-slide>

            <!-- Dap Card -->
            <ion-slide>
                <ion-card class="progresscard-border height200">
                    <div class="profile-picture bgDAPImgCard">
                        <span class="padding2per">
              <img class="profileImg" src="assets/zenLearn-imgs/DAP-icon.svg"
                onerror="this.src='./assets/imgs/logo.png'" />
            </span>
                        <span class="profile-heading colorWhite">{{dapCardData?.title}}</span>
                    </div>
                    <div class="dap-lowerCard-container">
                        <div class="dap-item font12">
                            <div class="dap-data dap-headerbg colorWhite">Trainings</div>
                            <div class="trainings-title behavioral-title" (click)="goToMyDapList('Technical')">
                                <div class="dap-name">Technical</div>
                            </div>
                            <div class="trainings-title technical-title" (click)="goToMyDapList('Behavioural')">
                                <div class="dap-name"> Behavioural</div>
                            </div>
                            <div class="trainings-title total-title" (click)="goToMyDapList('')">
                                <div class="dap-name">Total</div>
                            </div>
                        </div>
                        <div class="dap-item" *ngFor="let item of dapCardData.dapDetails">
                            <div class="dap-data dap-headerbg colorWhite">{{item.key}}</div>
                            <div class="dap-data dap_row{{i}}" *ngFor="let dapItem of item.value; index as i">
                                <!-- <div class="dap-name">{{dapItem.key}}</div> -->
                                <div class="dap-value">{{dapItem.value}}</div>
                            </div>
                        </div>

                    </div>
                </ion-card>
            </ion-slide>
            <!-- Leader Board Card -->
            <!-- <ion-slide>
        <ion-card class="progresscard-border height200">
          <div class="profile-picture bgLeaderBoardImgCard">
            <span class="padding2per">
              <img class="profileImg" src="assets/zenLearn-imgs/leaderBoard-icon.svg"
                onerror="this.src='./assets/imgs/logo.png'" />
            </span>
            <span class="profile-heading colorWhite">Leader Board</span>
          </div>
          <div class="dap-container">
            <div class="dap-item">
              <div class="score-parent">
                <div><img class="yourScore-img" src="assets/zenLearn-imgs/yourScoreIcon.svg"
                    onerror="this.src='./assets/imgs/logo.png'" />
                </div>
                <div class="yourScore-title">Your Score</div>
              </div>

              <div class="leaderBoard-lowerCard-parent">
                <div class="leaderboard-data-card {{dapItem.key}}" *ngFor="let dapItem of leaderCardData">
                  <span class="leaderBoard-score-value ">{{dapItem.value | number}}</span>
                  <span class="leaderBoard-score-key"
                    [ngClass]="{'lightBlue-color': dapItem.key == 'Technical', 'lightGreen-color': dapItem.key == 'Behavioural','lightPurple-color': dapItem.key == 'Total'}">{{dapItem.key}}</span>
                </div>
              </div>
            </div>
          </div>
        </ion-card>
      </ion-slide> -->
            <!-- Enrolled Courses Card -->
            <ion-slide>
                <ion-card class="progresscard-border height200">
                    <div class="profile-picture bgEnrolledImgCard">
                        <span class="padding2per">
              <img class="profileImg" src="assets/zenLearn-imgs/enrolledCourses-icon.svg"
                onerror="this.src='./assets/imgs/logo.png'" />
            </span>
                        <span class="profile-heading colorWhite">Enrolled Courses</span>
                    </div>

                    <div class="enrolledData">

                        <img class="enrolledCount-img" src="assets/zenLearn-imgs/enrolledCourses-count-icon.svg" onerror="this.src='./assets/imgs/logo.png'" />
                        <div class="enrolledCount-title">Total: {{enrolledCardData[2]?.value}}</div>
                    </div>
                    <div class="enrolledData-container">

                        <div class="technical-course-container" (click)="goToEnrolledCourses(enrolledCardData[0]?.key,enrolledCardData[0]?.value)">
                            <div class="technicalImg-parent">
                                <img class="tecnicalImg" src="assets/zenLearn-imgs/technical.svg" onerror="this.src='./assets/imgs/logo.png'" />

                            </div>
                            <div class="course-hrs-container">
                                <span>{{enrolledCardData[0]?.key}}</span>
                                <span>{{enrolledCardData[0]?.value}}</span>
                            </div>
                        </div>
                        <div class="behavioural-course-container" (click)="goToEnrolledCourses(enrolledCardData[1]?.key,enrolledCardData[1]?.value)">
                            <div class="technicalImg-parent">
                                <img class="behaviouralImg" src="assets/zenLearn-imgs/behavioural.svg" onerror="this.src='./assets/imgs/logo.png'" />

                            </div>
                            <div class="course-hrs-container lightGreen-color">
                                <span>{{enrolledCardData[1]?.key}}</span>
                                <span>{{enrolledCardData[1]?.value}}</span>
                            </div>
                        </div>

                    </div>
                </ion-card>
            </ion-slide>
        </ion-slides>

        <div class="mid-slider">
            <ion-slides class="height-auto" [slidesPerView]="2.2">
                <!-- learning-card -->
                <ion-slide *ngFor="let item of midCartData">
                    <div class="midcart-item {{item?.title}}" (click)="goToDetailPage(item?.title, '',item)">
                        <span class="padding2per">
              <!-- <img class="profile-round" [src]=item?.icon onerror="this.src='./assets/imgs/logo.png'" /> -->
              <img class="cartImg" src="assets/zenLearn-imgs/myDap.svg" onerror="this.src='./assets/imgs/logo.png'"
                *ngIf="item?.title=='DAP' || item?.title=='My DAP'" />
              <img class="cartImg" src="assets/zenLearn-imgs/calender.svg" onerror="this.src='./assets/imgs/logo.png'"
                *ngIf="item?.title=='Learning Calendar'" />
              <img class="cartImg" src="assets/zenLearn-imgs/preference.svg" onerror="this.src='./assets/imgs/logo.png'"
                *ngIf="item?.title=='Preferences'" />
              <img class="cartImg" src="assets/zenLearn-imgs/mentorship.svg" onerror="this.src='./assets/imgs/logo.png'"
                *ngIf="item?.title=='Mentorship'" />
              <img class="cartImg" src="assets/zenLearn-imgs/All_Courses_Icon.svg"
                onerror="this.src='./assets/imgs/logo.png'" *ngIf="item?.title=='More Recommendations'" />
            </span>
                        <div class="midcart-heading colorWhite">{{item?.title}}</div>
                    </div>
                </ion-slide>
            </ion-slides>
        </div>
        <!-- segments -->
        <div class="padding9px">
            <div class="flex-spac-betwn-center">
                <div class="segment-button justify-cont-flex-end margin-right20 flex">
                    <div *ngFor="let item of coursesName">
                        <button (click)="_selecteCoures(item)" [ngClass]="{'activeColor': selectedCourse == item}">
             <span *ngIf="item != 'Recommendations'">{{item | titlecase}}</span> 
             <span *ngIf="item == 'Recommendations'">Programs</span> 
            </button>
                    </div>
                </div>



                <div *ngIf="segmentlearnData?.length > 0" class="bottom-border margin-right2" (click)="goToEnrolled()">
                    View More
                </div>
            </div>
            <div class="tabHeading" *ngIf="selectedCourse=='Recommendations'">Courses shortlisted by you in DAP</div>
            <div class="tabHeading" *ngIf="selectedCourse=='enrolled'">Courses enrolled by you</div>

            <ion-slides #mySlider slidesPerView="1.2">

                <ion-slide *ngFor="let item of segmentlearnData; let i = index">

                    <ion-card class="ion-card" (click)="offeringDetail(item)">
                        <div class="card-container">
                            <div class="card-header {{item.method}}">
                                <div class="titleName">
                                    <img *ngIf="item.method=='' || item.method==null" src="assets/zenLearn-imgs/dap-icon3.svg" />
                                    <img *ngIf="item.method=='V Learn' || item.method=='V Learn '" src="assets/imgs/virtual-icon.svg" />
                                    <img *ngIf="item.method=='Classroom'" src="assets/imgs/classroom-icon.svg" />
                                    <img *ngIf="item.method=='Online'" src="assets/imgs/online-icon.svg" />
                                </div>
                                <div class="subTitle">{{item?.title}}</div>
                            </div>

                            <div class="card-data">
                                <div class="flex fontp9em padding-top3per" *ngIf="item?.facility">
                                    <span class="padding-right8"><img src="assets/imgs/zenLearnlocation.svg" /></span>

                                    <span class="color-gray ftWT" *ngIf="item?.itemType && item?.facility != 'CLASSROOM'">{{item?.facility}} - {{item?.itemType | titlecase}}</span>
                                    <span class="color-gray ftWT" *ngIf="item?.itemType && item?.facility == 'CLASSROOM'">{{item?.facility}}</span>
                                    <span class="color-gray ftWT" *ngIf="!item?.itemType">{{item?.facility}}</span>
                                    <!-- {{item.facility}} -->
                                </div>
                                <div class="flex fontp9em padding-top3per" *ngIf="item?.creditHours">
                                    <span class="padding-right8"><img src="assets/imgs/zenLearnCredit_Hours.svg" /></span>
                                    <span class="color-gray">Credit Hrs : {{item?.creditHours}}</span>
                                    <!-- {{item.facility}} -->
                                </div>

                                <div class="flex padding-top3per" *ngIf="item?.endDate != '' || item?.endTime != ''">
                                    <span class="padding-right8"><img src="assets/imgs/zenLearnCalender.svg" /></span>
                                    <span class="column fontp9em heading-color ">
                    <span class="padding-bottom4per">{{item?.startDate}} To {{item?.endDate}}</span>
                                    <span class="color-gray">{{item?.startTime}} To
                      {{item?.endTime}}</span></span>
                                </div>
                                <div class="flex padding-top3per" *ngIf="item?.endDate == '' || item?.endTime == ''">
                                    <span class="padding-right8"><img src="assets/imgs/zenLearnCalender.svg" /></span>
                                    <span class="column fontp9em heading-color ">
                    <span class="padding-bottom4per">{{item?.startDate}}</span>
                                    </span>
                                </div>
                                <div class="like-dislike-wrapper">
                                    <div class="like" (click)="likeDislike('like',i,item?.isLike,item?.itemId);$event.stopPropagation()">
                                        <img class="" *ngIf="item?.isLike==0 || item?.isLike==-1" src="assets/zenLearn-imgs/like.svg" onerror="this.src='./assets/imgs/logo.png'" />
                                        <img class="" *ngIf="item?.isLike==1" src="assets/zenLearn-imgs/likeBlue.svg" onerror="this.src='./assets/imgs/logo.png'" />

                                    </div>
                                    <div class="dislike" (click)="likeDislike('dislike',i,item?.isLike,item?.itemId);$event.stopPropagation()">
                                        <img class="" *ngIf="item?.isLike==0 || item?.isLike==1" src="assets/zenLearn-imgs/disLike.svg" onerror="this.src='./assets/imgs/logo.png'" />
                                        <img class="" *ngIf="item?.isLike ==-1" src="assets/zenLearn-imgs/disLikeBlue.svg" onerror="this.src='./assets/imgs/logo.png'" />

                                    </div>
                                </div>
                            </div>
                        </div>
                    </ion-card>
                </ion-slide>
            </ion-slides>


            <div class="nodata " *ngIf="!segmentlearnData || segmentlearnData.length ==0">
                <ion-card class="ion-card" *ngIf="selectedCourse == 'Recommendations'" (click)="goToMyDapList()">
                    <div class="card-container">
                        <div class="card-header">
                            <div class="titleName">
                                <img src="assets/zenLearn-imgs/dap-icon3.svg" />
                            </div>
                            <div class="subTitle">DAP</div>
                        </div>
                        <div class="card-data">
                            <p class="dapText"> You are yet to create DAP for this financial year, <span>click</span> here to create new DAP</p>
                        </div>
                    </div>
                </ion-card>
                <ion-card class="ion-card" *ngIf="selectedCourse == 'enrolled'" (click)="showCalender('recommended')">
                    <div class="card-container">
                        <div class="card-header">
                            <div class="titleName">
                                <img src="assets/zenLearn-imgs/dap-icon3.svg" />
                            </div>
                            <div class="subTitle">Enrolled</div>
                        </div>
                        <div class="card-data">
                            <p class="dapText"> You have not enrolled for future courses, <span>click</span> here to enroll.</p>
                        </div>
                    </div>
                </ion-card>
            </div>
        </div>
    </div>
    <div class="nodata" *ngIf="!zenLearnData">{{errorMsg}}</div>

    <!-- <div (click)="dap()" style="
  background: #26caf5;
  width: 100px;
  padding: 10px;
  text-align: center;
  margin: 10px;
"> MYDap</div> -->
</ion-content>