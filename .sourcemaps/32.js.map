{"version":3,"sources":["../../src/container/zents/overtime/additional-hours/additional-hours.module.ts","../../src/container/zents/overtime/additional-hours/additional-hours.ts"],"names":[],"mappings":"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","file":"32.js","sourcesContent":["import { NgModule } from '@angular/core';\nimport { IonicPageModule } from 'ionic-angular';\nimport { AdditionalHoursPage } from './additional-hours';\nimport { ComponentsModule } from '../../../../components/components.module';\n\n@NgModule({\n  declarations: [\n    AdditionalHoursPage,\n  ],\n  imports: [\n    IonicPageModule.forChild(AdditionalHoursPage),\n    ComponentsModule\n  ],\n})\nexport class AdditionalHoursPageModule { }\n\n\n\n// WEBPACK FOOTER //\n// ./src/container/zents/overtime/additional-hours/additional-hours.module.ts","import { Component, ViewChild } from '@angular/core';\nimport { IonicPage, NavController, NavParams, ModalController, FabContainer } from 'ionic-angular';\nimport { CommonUtilities } from '../../../../providers/commonUtilities/commonUtilities';\nimport { HttpProvider } from '../../../../providers/http/http';\nimport { version } from '@app/env';\nimport { OtEditModalComponent } from '../../../../components/ot-edit-modal/ot-edit-modal';\nimport moment from 'moment';\nimport { CalenderModel } from '../../../../components/calender-model/calender-model';\n/**\n * Generated class for the AdditionalHoursPage page.\n *\n * See https://ionicframework.com/docs/components/#navigation for more info on\n * Ionic pages and navigation.\n */\n\n@IonicPage()\n@Component({\n  selector: 'page-additional-hours',\n  templateUrl: 'additional-hours.html',\n})\nexport class AdditionalHoursPage {\n  @ViewChild('fab') fab: FabContainer;\n\n  additionalHourTimesheetData: any = null;\n  disableSubmit: boolean = false;\n  private showOverlay: boolean = false;\n  private calendarData: any;\n  private dates: any;\n  private selectedDate: string;\n  private dateRange ={\n    minDate: null,\n    maxDate: null\n  }\n  private months = {\n    currentMonth: null,\n    lastMonth: null\n  }\n  private rejectedDatesArr: Array<any> = [];\n  private pageTitle: String;\n\n  constructor(private navCtrl: NavController, private navParams: NavParams,\n    private utility: CommonUtilities, private httpProvider: HttpProvider,\n    private modalCtrl: ModalController) {\n  }\n\n  ionViewDidLoad() {\n    this.pageTitle = this.navParams.get('pageTitle');\n    this.getCalendarInfo();\n  }\n\n   /**\n   * Get Calendar Specific Data\n   */\n  getCalendarInfo() {\n    this.utility.updateLoader(true);\n    const url = 'calenderInfo';\n    const data = {\n      \"version\": version\n    }\n    this.httpProvider.http.zentsCommonService({ url, data, timeentry: true }).subscribe((res: any) => {\n      if (res && res.data) {\n        this.calendarData = res.data;\n        this.rejectedDatesArr = this.calendarData.AdditionalHrsRejectedTimesheetsDates;\n        this.dates = this.calendarData.CalendarDates;\n        this.dateRange.minDate = this.dates.additionalHrsSaveSubmitStartDate;\n        this.dateRange.maxDate = this.dates.endDate;\n        this.selectedDate = this.dates.endDate;\n        this.months.currentMonth = this.dates.currentMonth;\n        this.months.lastMonth = this.dates.lastMonth;\n        this.getAdditionalHourTimesheetDetails(this.selectedDate);\n      }\n    }, (err) => {\n      this.utility.updateLoader(false);\n    })\n  }\n\n  applyAdditionalHours() {\n    this.fabClicked();\n    this.fab.close();\n    if (this.dates) {\n      new Promise((resolve, reject) => {\n        let dates = {\n          'pageTitle': this.pageTitle,\n          'applyCalendarMinDate': this.dates.additionalHrsStartDate,\n          'applyCalendarMaxDate': this.dates.additionalHrsEndDate,\n          resolve: resolve\n        }\n        this.navCtrl.push('ApplyAdditionalHoursPage', { 'calendarDates': dates });\n      }).then((userMessage:string) => {\n        this.getAdditionalHourTimesheetDetails(this.selectedDate,userMessage);\n      });\n    }\n  }\n\n  fabClicked() {\n    this.showOverlay = !this.showOverlay;\n  }\n\n  onDateChange(e) {\n    this.selectedDate = this.utility.changeToDateString(e);\n    this.getAdditionalHourTimesheetDetails(this.selectedDate,'',true);\n  }\n\n  /**\n   * \n   * Get Additional Hour Time-entry details for the selected date\n   * @param selDate : get data for this date\n   * @param message : dispaly message in toast if there is any action performed(save,submit,delete)\n   * @param refreshLoader : true only when no action(save,submit,delete) is performed\n   */\n  getAdditionalHourTimesheetDetails(selDate: string, message = '', refreshLoader = false) {\n\n    if (refreshLoader) {\n      this.utility.updateLoader(true);\n    }\n    const url = 'overtimeentry';\n    const data = {\n      \"selectedDate\": selDate\n    }\n\n    this.httpProvider.http.zentsCommonService({ url, data, overtime: true }).subscribe((res: any) => {\n\n      this.utility.updateLoader(false);\n      if (res && res.data) {\n        let data = res.data;\n        this.additionalHourTimesheetData = data;\n        let list = [];\n        if (data.taskAndTimesheetDetails.length > 0) {\n          data.taskAndTimesheetDetails.map((timesheet) => {\n            if (timesheet.taskList.length > 0) {\n              list = timesheet.taskList.filter((item: any) => item.approvalStatus == '-1' || item.approvalStatus == '3')\n            }\n          })\n        }\n        this.disableSubmit = list.length > 0 ? false : true;\n\n        this.utility.showToast(message);\n      }\n    }, err => {\n      this.utility.updateLoader(false);\n    })\n  }\n\n  /**\n   * Method to Perform Save Action\n   * @param taskData \n   * @param dataObj \n   */\n  saveAddHrsTimesheet(taskData: any, dataObj: any) {\n    this.utility.updateLoader(true);\n    const url: string = \"processovertimetimesheet\";\n    const data = {\n      \"taskUpdateDate\": taskData.taskUpdateDate,\n      \"totalEfforts\": this.utility.convertTime(dataObj.efforts, 1),\n      \"billablityFlag\": dataObj.billability ? dataObj.billability : taskData.billablityFlag,\n      \"comments\": dataObj.remarks ? dataObj.remarks : taskData.comments,\n      \"taskId\": taskData.taskId,\n      \"taskInformationId\": 0,\n      \"billabilityFlag\": dataObj.billability ? dataObj.billability : taskData.billabilityFlag,\n      \"additionalHrsFlag\": \"YES\",\n      \"poInvoiceKey\": taskData.poInvoiceKey,\n      \"uuId\": taskData.uuId,\n      \"taskActualEffort\": taskData.taskActualEffort\n    }\n\n    this.httpProvider.http.zentsCommonService({ url, data, overtime: true }).subscribe((res: any) => {\n\n      if (res && res.userMessage) {\n        this.getAdditionalHourTimesheetDetails(this.selectedDate, res.userMessage);\n      }\n    }, (err) => {\n      this.utility.updateLoader(false);\n      this.getAdditionalHourTimesheetDetails(this.selectedDate);  //if save error occurs restore old state of timesheet\n    })\n    //}\n  }\n\n  //open edit tasks modal\n  async presentEditModal(task: any) {\n\n    let editModal = this.modalCtrl.create(OtEditModalComponent, {\n      taskObj: task\n    });\n    editModal.present();\n    editModal.onDidDismiss((res: any) => {\n      if (res) {\n        this.saveAddHrsTimesheet(task, res);\n      }\n    });\n  }\n\n  /**\n   * Method to Delete Timesheet\n   * @param taskObj \n   */\n  deleteTimesheet(taskObj: any) {\n    const url: string = \"detachovertimetimesheet\";\n    const data: any = {\n      \"taskUpdateDate\": taskObj.taskUpdateDate,\n      \"taskId\": taskObj.taskId\n    }\n    this.utility.updateLoader(true);\n    this.httpProvider.http.zentsCommonService({ url, data, overtime: true }).subscribe((res: any) => {\n      if (res && res.userMessage) {\n        this.getAdditionalHourTimesheetDetails(this.selectedDate, res.userMessage);\n      }else{\n        this.getAdditionalHourTimesheetDetails(this.selectedDate, res.userMessage);\n      }\n    }, (err) => {\n      this.utility.updateLoader(false);\n    })\n  }\n\n  //Confirm submit \n  showSubmitConfirmAlert(timesheetList: Array<any>) {\n    let alert = this.utility.presentConfirmation('Are you sure you want to submit this timesheet ?');\n    alert.then(() => {\n      this.submitTimesheet(timesheetList);\n    }, (err) => {});\n  }\n\n  /**\n   * Method to Submit Timesheet\n   * @param timesheet \n   */\n  submitTimesheet(timesheet: Array<any>) {\n    let rejectedTimesheetFlag: boolean = false;\n    let rejectedTaskName: string = null;\n\n    let timesheetList: Array<any> = [];\n    if (timesheet && timesheet.length > 0) {\n      timesheet.map(item => {\n        if (item.taskList.length > 0) {\n          item.taskList.map(task => {\n            if (task.approvalStatus !== '0') {\n              //comments mandatory while submitting rejected timesheet\n              if (task.approvalStatus == '3' && !task.comments && !rejectedTimesheetFlag) {\n                rejectedTimesheetFlag = true;\n                rejectedTaskName = task.taskName;\n              }\n              timesheetList.push(\n                {\n                  \"taskUpdateDate\": task.taskUpdateDate,\n                  \"totalEfforts\": task.totalEfforts,\n                  \"approvalStatus\": task.approvalStatus,\n                  \"taskId\": task.taskId,\n                  \"billabilityFlag\": task.billabilityFlag\n                }\n              );\n            }\n          })\n        }\n      })\n    }\n\n    if (timesheetList.length > 0 && !rejectedTimesheetFlag) {\n      const url: string = \"processovertimefinaltimesheet\";\n      const data: any = {\n        \"timesheets\": timesheetList\n      }\n      this.utility.updateLoader(true);\n      this.httpProvider.http.zentsCommonService({ url, data, overtime: true }).subscribe((res: any) => {\n        if (res && res.userMessage) {\n          this.getAdditionalHourTimesheetDetails(this.selectedDate,res.userMessage);\n        }\n      }, err => {\n        this.utility.updateLoader(false);\n      })\n    }\n    else if (rejectedTimesheetFlag) {\n      this.utility.presentAlert('Please add remarks for ' + rejectedTaskName + ' task before submission');\n    }\n  }\n\n  goToAppliedHoursList() {\n    this.fabClicked();\n    this.fab.close();\n    this.navCtrl.push('AppliedHoursListPage');\n  }\n\n  refreshTimesheet() {\n    this.getAdditionalHourTimesheetDetails(this.selectedDate,'',true);\n  }\n\n  getDatesOfSelectedMonth(monthName: String, monthSeq: String) {\n    let dates = this.rejectedDatesArr.filter(date => moment(date).format('MMMM').toLowerCase() == monthName.toLowerCase());\n    let data = {\n      rejectedDates: dates\n    }\n    this.openCalenderModel(monthSeq, data);\n  }\n\n  /**\n   * Open Calendar Modal to highlight rejected timesheets\n   * @param monthseq: Specifies the month sequence .i.e lastmonth or currentmonth \n   * @param dataObj \n   */\n  openCalenderModel(monthseq, dataObj) {\n    let modal = this.modalCtrl.create(CalenderModel, {\n      dataParams: {\n        rejectedDates: dataObj.rejectedDates,\n        key: monthseq,\n        type: 'add-hrs'\n      }\n    }, {\n      cssClass: 'calendermodel',\n    });\n\n    modal.present();\n    modal.onDidDismiss((res) => {\n      if (res) {\n        \n        this.selectedDate = res;\n      }\n    })\n  }\n\n}\n\n\n\n// WEBPACK FOOTER //\n// ./src/container/zents/overtime/additional-hours/additional-hours.ts"],"sourceRoot":""}